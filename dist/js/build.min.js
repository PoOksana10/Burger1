document.addEventListener("DOMContentLoaded",(function(){new Prices("").setLocalStorage();const e=document.getElementById("basket"),t=new Element([{attributes:[{type:"button"},{value:"Orders"},{classNames:["basket"]}]},"input",""]).setMultipleAttribute();e.append(t);new IngredientsData("").menuElements.forEach((e=>{document.getElementById(e).addEventListener("click",(function(){document.getElementById("productImage").src=`../images/${e}.jpg`,document.querySelector(".productImage").classList.remove("hidden");new IngredientsData(e).updateListOfIngredients(e)}))}))})),document.addEventListener("click",(e=>{const t=e.target.closest(".confirm-order"),r=e.target.closest(".basket"),n=e.target.closest(".delProduct"),o=e.target.closest(".total-price-btn");if(t){new Prices(t).userOrdersStorage()}if(r){document.querySelector(".productImage").classList.add("hidden"),document.querySelector(".container1").classList.remove("hidden");new Prices(r).displayOrders()}if(n){const e=n.getAttribute("data-delProduct"),t=JSON.parse(localStorage.getItem("UserOrders")),r=t.find((t=>t[0]===e));t.splice(t.indexOf(r),1),localStorage.setItem("UserOrders",JSON.stringify(t)),document.querySelector(`li[data-line="${e}"]`).remove(),0==t.length&&(document.querySelector(".total-price-btn").remove(),document.getElementById("basketInfo").innerText="There is no orders yet!")}if(o){const e=new Message(o.value);document.querySelector(".total-price-btn").remove(),document.getElementById("basketInfo").innerHTML=e.getMessage(),setTimeout((()=>{window.location.reload(),localStorage.removeItem("BurgerCalories"),localStorage.removeItem("UserOrders")}),7e3)}})),document.addEventListener("change",(e=>{const t=e.target.closest(".itemQty");t.value.match(/^[1-9]/)||(t.value="1",alert("Minimum quantity is 1!"));new Prices(t).updateOrderPrice()}));
class Element{constructor(t){this.attributes=t[0].attributes,this.tagName=t[1]}setMultipleAttribute(){return this.element=document.createElement(this.tagName),this.attributes.forEach((t=>{for(let e in t)if("classNames"===e)for(let s of t[e])this.element.classList.add(s);else this.element.setAttribute(e,t[e])})),this.element}}
class Message{constructor(e){this.item=e,this.message="",this.coffeeMessage="The classic Colombian coffee personifies the typical taste of South American coffees. Thus, it has a mellow citrus acidity combined with a strong caramel sweetness. It is considered a medium-bodied coffee with hints of nutty undertones, fruity flavors, and notes of chocolate",this.dessertMessage="It's a rich, moist intensely chocolate flavoured cake. It's denseness and distinct chocolate flavour can make it seem more like a dessert than a cake. Many describe this treat as a pure chocolate sensation. Certainly the dense structure does concentrate the chocolate flavour.",this.burgerMessage="Juicy, big, loaded with toppings of my choice. High quality beef medium to well with cheese on a multigrain bun. A huge single burger with all the fixings as per below list!Want your choice to make - go ahead and adjust your burger how you like it!",this.colaMessage="Enjoy world wide loved soft drink, Coca Cola! Served with piece of lime in glass full of ice to make your thirst to go away!",this.friesMessage="Ideally your fries should have a crunchy exterior and a light, fluffy interior. When eating a serving of French fries, the last fry should always hold its form. Imagine eating a burger with a side of fries. Fries are either eaten first or last- so be sure to leave a lasting impression.",this.burgerSetMessage="Great deal for you! Order full set and get 10 percent discount. Tasty burger with crunchy fries and great taste of cooled Coca Cola will be a holiday for your stomach!",this.confirmationOrderMessage="Thank you for ordering with our restaurant! Please pay at the desk and collect order as per your number!    "}getMessage(){switch(this.item){case"Coffee":return this.message=this.coffeeMessage,this.message;case"Chocolate Cake":return this.message=this.dessertMessage,this.message;case"French Fries":return this.message=this.friesMessage,this.message;case"Burger Classic":return this.message=this.burgerMessage,this.message;case"Coca Cola":return this.message=this.colaMessage,this.message;case"Burger Set":return this.message=this.burgerSetMessage,this.message;default:return this.message=this.confirmationOrderMessage+"<p> Your number is # "+Math.floor(100*Math.random())+"</p><p>Total amount to pay : "+this.item.split(" ")[2]+" USD</p>",this.message}}}
class Burger{#e=["Bun","Meat"];constructor(){this.base_ingredients=this.#e,this.OnionCalories=7,this.SaladCalories=17,this.CheeseCalories=58,this.CabbageCalories=22,this.TomatoCalories=8,this.MeatCalories=250,this.BunCalories=150,this.MustardCalories=10,this.SauceBarbequeCalories=34,this.MayoCalories=94,this.KetchupCalories=17,this.ingredientsBurger=[{ingredient:"Onion",status:!0,cal:this.OnionCalories},{ingredient:"Salad",status:!0,cal:this.SaladCalories},{ingredient:"Cheese",status:!0,cal:this.CheeseCalories},{ingredient:"Cabbage",status:!0,cal:this.CabbageCalories},{ingredient:"Tomato",status:!0,cal:this.TomatoCalories},{ingredient:"Mayo",status:!0,cal:this.MayoCalories},{ingredient:"Ketchup",status:!0,cal:this.KetchupCalories},{ingredient:"Mustard",status:!0,cal:this.MustardCalories},{ingredient:"SauceBarbeque",status:!0,cal:this.SauceBarbequeCalories}]}}
class IngredientsData{#e=[{"French Fries":312},{"Coca Cola":139},{"Burger Set":963},{"Burger Classic":512},{"Chocolate Cake":360},{Coffee:95}];constructor(e){this.burgerClass=new Burger,this.element=e,this.ingredientsIds=[],this.parent=document.querySelector(".ingredients"),this.menuElements=["Burger Classic","French Fries","Coffee","Coca Cola","Chocolate Cake","Burger Set"],this.ingredients=[],this.title=document.querySelector(".product-title"),this.confirmBtn=document.querySelector(".confirm-order")}updateListOfIngredients(){for(let e=0;e<this.burgerClass.ingredientsBurger.length;e++)this.ingredients.push(Object.values(this.burgerClass.ingredientsBurger[e])[0]);this.showListOfIngredients()}showListOfIngredients(){localStorage.setItem("BurgerCalories",JSON.stringify(this.burgerClass.ingredientsBurger)),document.querySelector(".container1").classList.add("hidden"),this.parent.textContent="",this.title.innerText=this.element;let e=this.BunCalories+this.MeatCalories;this.burgerClass.ingredientsBurger.forEach((t=>{e+=t.cal})),this.confirmLine=document.createElement("li");const t=new Element([{attributes:[{"data-id":this.element},{classNames:["product-description"]}]},"li",""]);this.descriptionLine=t.setMultipleAttribute(),"Burger Classic"!==this.element&&this.#e.forEach((t=>{for(let i in t)i===this.element&&(e=t[i])}));const i=new Element([{attributes:[{"data-id":this.element},{type:"button"},{value:"Confirm Order - Total calories: "+e},{classNames:["confirm-order"]}]},"input",""]);this.confirmBtn=i.setMultipleAttribute(),this.messageInit=new Message(this.element),this.descriptionLine.innerText=this.messageInit.getMessage(),this.parent.append(this.descriptionLine),"Burger Classic"===this.element&&(document.querySelector(".product-title").innerText="Burger Classic",this.ingredients.forEach((e=>{this.childMain=document.createElement("li");for(let t=0;t<=4;t++)if(this.childSub=document.createElement("td"),this.childMain.append(this.childSub),0==t)this.childSub.innerText=e;else if(1==t){const t=new Element([{attributes:[{type:"button"},{value:"Add -"},{classNames:["plus-"+e,"add"]}]},"input",""]);this.plusBtn=t.setMultipleAttribute(),this.childSub.append(this.plusBtn)}else if(2===t){const t=new Element([{attributes:[{type:"button"},{value:"Remove -"},{classNames:["minus-"+e,"remove"]}]},"input",""]);this.minusBtn=t.setMultipleAttribute(),this.childSub.append(this.minusBtn)}else if(3==t){if(this.e=this.burgerClass.ingredientsBurger.find((t=>t.ingredient===e)),this.e){this.childSub.classList.add("status_img");const t=new Element([{attributes:[{alt:""},{src:"./images/ok.png"},{classNames:["status-img",e]}]},"img","status_img"]);this.img=t.setMultipleAttribute(),this.childSub.append(this.img)}}else 4==t&&(this.childSub.innerText=this.burgerClass.ingredientsBurger.find((t=>t.ingredient===e)).cal+"Cal",this.childSub.classList.add("cal"+e));this.parent.append(this.childMain)}))),this.confirmLine.append(this.confirmBtn),this.parent.append(this.confirmLine),this.customIngredientListener()}customIngredientListener(){this.ingredients.forEach((e=>{this.ingredientsIds.push("plus-"+e),this.ingredientsIds.push("minus-"+e)})),this.ingredientsIds.forEach((e=>{document.addEventListener("click",(t=>{this.target=t.target.closest(`.${e}`),this.target&&(this.ingredientId=e,this.updateIngredients())}))}))}updateIngredients(){if(this.ingredientId){const e=this.ingredientId.split("-")[0],t=this.ingredientId.split("-")[1];this.newUpdatedList=JSON.parse(localStorage.getItem("BurgerCalories")),this.selectedIngredient=this.newUpdatedList.find((e=>e.ingredient===t)),this.elementIndex=this.newUpdatedList.indexOf(this.selectedIngredient);const i=document.querySelector("."+("cal"+this.selectedIngredient.ingredient));"plus"===e?(this.newUpdatedList[this.elementIndex].status=!0,this.newUpdatedList[this.elementIndex].cal=this.burgerClass.ingredientsBurger.find((e=>e.ingredient===t)).cal,i.innerText=this.burgerClass.ingredientsBurger[this.elementIndex].cal+" Cal"):"minus"===e&&(this.newUpdatedList[this.elementIndex].status=!1,this.newUpdatedList[this.elementIndex].cal=0,i.innerText="0 Cal");let s=this.BunCalories+this.MeatCalories;this.newUpdatedList.forEach((e=>{s+=e.cal})),this.confirmBtn.value="Confirm Order - Total calories: "+s,this.updateStatusImg(),localStorage.setItem("BurgerCalories",JSON.stringify(this.newUpdatedList))}}updateStatusImg(){const e=document.querySelector(`.${this.selectedIngredient.ingredient}`);!0===this.newUpdatedList[this.elementIndex].status?e.src="./images/ok.png":e.src="./images/off.png"}}
class Prices{#e=[{"Burger Classic":6.87},{"Coca Cola":1.32},{Coffee:1.87},{"Chocolate Cake":3.36},{"Burger Set":9.65},{"French Fries":2.54}];constructor(e){this.data=new Burger,this.target=e,this.userOrders=JSON.parse(localStorage.getItem("UserOrders")),this.displayElement=document.getElementById("basketInfo")}setLocalStorage(){localStorage.getItem("UserOrders")||localStorage.setItem("UserOrders","[]")}userOrdersStorage(){const e=this.target.getAttribute("data-id");if(this.userOrders){if(this.userOrders.find((t=>t[0]===e)))alert("This item is already in your basket!");else{const t=1,r=this.priceColumnData("",[e,t],!1);this.userOrders.push([e,t,r,t*r]),localStorage.setItem("UserOrders",JSON.stringify(this.userOrders)),this.finalizeOrder()}}}finalizeOrder(){confirm("Item has been added to basket. Would you like to finalize order?")&&(document.querySelector(".productImage").classList.add("hidden"),document.querySelector(".container1").classList.remove("hidden"),this.displayOrders())}displayOrders(){this.displayElement.innerHTML="";for(let e of this.userOrders){const t=document.createElement("li");t.setAttribute("data-line",e[0]);for(let r=0;r<=3;r++){if(this.orderLineColumn=document.createElement("td"),0==r)if("Burger Classic"===e[0]){let t="";let r;JSON.parse(localStorage.getItem("BurgerCalories")).forEach((e=>{e.status&&(t+=e.ingredient+", ")})),0==t.length?(console.log(t.length),r=":plain"):r=", ",this.orderLineColumn.innerHTML=`${e[0]} : <p>( ${this.data.base_ingredients[0]+", "+this.data.base_ingredients[1]+r+t.slice(0,-2)} )</p>`}else this.orderLineColumn.innerText=e[0];else if(1==r){let t=1;this.userOrders.forEach((r=>{r[0]===e[0]&&(t=r[1])}));const r=new Element([{attributes:[{type:"number"},{value:t},{min:"1"},{"data-name":e[0]},{classNames:["itemQty"]}]},"input",""]).setMultipleAttribute();this.orderLineColumn.append(r)}else if(2==r)this.priceColumnData(this.orderLineColumn,e,!0);else if(3==r){const t=new Element([{attributes:[{alt:""},{"data-delProduct":e[0]},{src:"./images/delete.png"},{classNames:["delProduct"]}]},"img",""]).setMultipleAttribute();this.orderLineColumn.append(t)}t.append(this.orderLineColumn),this.displayElement.append(t)}}if(0==!this.userOrders.length){const e=document.createElement("li"),t=new Element([{attributes:[{type:"button"},{classNames:["total-price-btn"]}]},"input",""]);this.buyBtn=t.setMultipleAttribute(),this.setBtnValue(!0),e.append(this.buyBtn),this.displayElement.append(e)}else document.getElementById("basketInfo").innerText="There is no orders yet!"}setBtnValue(e){e||(this.buyBtn=document.querySelector(".total-price-btn"));let t=0;this.userOrders.forEach((e=>{t+=e[3]})),this.buyBtn.value="Confirm Orders "+t.toFixed(2)+" USD"}priceColumnData(e,t,r){let s;return this.#e.forEach((i=>{for(let a in i)a===t[0]&&(r?(e.innerText=(t[1]*i[a]).toFixed(2)+" USD",e.setAttribute("class","itemPrice"),e.setAttribute("data-name",t[0])):s=i[a])})),s}updateOrderPrice(){const e=document.querySelector(`.itemPrice[data-name="${this.target.getAttribute("data-name")}"]`),t=e.getAttribute("data-name");this.priceColumnData(e,[t,this.target.value],!0);const r=this.userOrders.find((e=>e[0]===t));r[1]=parseInt(this.target.value),r[3]=r[2]*this.target.value;const s=this.userOrders.indexOf(r);this.userOrders[s]=r,localStorage.setItem("UserOrders",JSON.stringify(this.userOrders)),this.setBtnValue(!1)}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIkVsZW1lbnQuanMiLCJNZXNzYWdlcy5qcyIsIkJ1cmdlci5qcyIsIkluZ3JlZGllbnRzRGF0YS5qcyIsIlByaWNlLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsIlByaWNlcyIsInNldExvY2FsU3RvcmFnZSIsInBhcmVudCIsImdldEVsZW1lbnRCeUlkIiwiYmFza2V0IiwiRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJ0eXBlIiwidmFsdWUiLCJjbGFzc05hbWVzIiwic2V0TXVsdGlwbGVBdHRyaWJ1dGUiLCJhcHBlbmQiLCJJbmdyZWRpZW50c0RhdGEiLCJtZW51RWxlbWVudHMiLCJmb3JFYWNoIiwiZWxlbWVudCIsInNyYyIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ1cGRhdGVMaXN0T2ZJbmdyZWRpZW50cyIsImUiLCJ0YXJnZXQxIiwidGFyZ2V0IiwiY2xvc2VzdCIsInRhcmdldDIiLCJ0YXJnZXQzIiwidGFyZ2V0NCIsInVzZXJPcmRlcnNTdG9yYWdlIiwiYWRkIiwiZGlzcGxheU9yZGVycyIsImdldEF0dHJpYnV0ZSIsInN0b3JhZ2UiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwicHJvZHVjdCIsImZpbmQiLCJzcGxpY2UiLCJpbmRleE9mIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImxlbmd0aCIsImlubmVyVGV4dCIsIm1lc3NhZ2UiLCJNZXNzYWdlIiwiaW5uZXJIVE1MIiwiZ2V0TWVzc2FnZSIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsInJlbW92ZUl0ZW0iLCJtYXRjaCIsImFsZXJ0IiwidXBkYXRlT3JkZXJQcmljZSIsImNvbnN0cnVjdG9yIiwiYXJncyIsInRoaXMiLCJ0YWdOYW1lIiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZSIsImtleSIsImNsYXNzbmFtZSIsInNldEF0dHJpYnV0ZSIsIml0ZW0iLCJjb2ZmZWVNZXNzYWdlIiwiZGVzc2VydE1lc3NhZ2UiLCJidXJnZXJNZXNzYWdlIiwiY29sYU1lc3NhZ2UiLCJmcmllc01lc3NhZ2UiLCJidXJnZXJTZXRNZXNzYWdlIiwiY29uZmlybWF0aW9uT3JkZXJNZXNzYWdlIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwic3BsaXQiLCJCdXJnZXIiLCJiYXNlX2luZ3JlZGllbnRzIiwiT25pb25DYWxvcmllcyIsIlNhbGFkQ2Fsb3JpZXMiLCJDaGVlc2VDYWxvcmllcyIsIkNhYmJhZ2VDYWxvcmllcyIsIlRvbWF0b0NhbG9yaWVzIiwiTWVhdENhbG9yaWVzIiwiQnVuQ2Fsb3JpZXMiLCJNdXN0YXJkQ2Fsb3JpZXMiLCJTYXVjZUJhcmJlcXVlQ2Fsb3JpZXMiLCJNYXlvQ2Fsb3JpZXMiLCJLZXRjaHVwQ2Fsb3JpZXMiLCJpbmdyZWRpZW50c0J1cmdlciIsImluZ3JlZGllbnQiLCJzdGF0dXMiLCJjYWwiLCJwcm9kdWN0Q2FscyIsIkNvZmZlZSIsImJ1cmdlckNsYXNzIiwiaW5ncmVkaWVudHNJZHMiLCJpbmdyZWRpZW50cyIsInRpdGxlIiwiY29uZmlybUJ0biIsImkiLCJwdXNoIiwiT2JqZWN0IiwidmFsdWVzIiwic2hvd0xpc3RPZkluZ3JlZGllbnRzIiwidGV4dENvbnRlbnQiLCJ0b3RhbENhbHMiLCJjb25maXJtTGluZSIsIm5ld0VsZW1lbnQxIiwiZGVzY3JpcHRpb25MaW5lIiwicHJvZHVjdERhdGEiLCJuZXdFbGVtZW50MiIsIm1lc3NhZ2VJbml0IiwiY2hpbGRNYWluIiwiY2hpbGRTdWIiLCJuZXdFbGVtZW50IiwicGx1c0J0biIsIm1pbnVzQnRuIiwibGlzdEluZ3JlZGllbnQiLCJhbHQiLCJpbWciLCJjdXN0b21JbmdyZWRpZW50TGlzdGVuZXIiLCJpbmdyZWRpZW50SWQiLCJ1cGRhdGVJbmdyZWRpZW50cyIsImFkZFJlbW92ZUluZ3JlZGllbnRJZCIsImluZ3JlZGllbnROYW1lIiwibmV3VXBkYXRlZExpc3QiLCJzZWxlY3RlZEluZ3JlZGllbnQiLCJlbGVtZW50SW5kZXgiLCJjYWxfY3VycmVudCIsInVwZGF0ZVN0YXR1c0ltZyIsImltZ19jdXJyZW50IiwicHJpY2VzIiwiZGF0YSIsInVzZXJPcmRlcnMiLCJkaXNwbGF5RWxlbWVudCIsInF0eSIsInByaWNlIiwicHJpY2VDb2x1bW5EYXRhIiwiZmluYWxpemVPcmRlciIsImNvbmZpcm0iLCJvcmRlckxpbmUiLCJvcmRlckxpbmVDb2x1bW4iLCJpbmdyZWRpZW50TGlzdCIsInBsYWluQnVyZ2VyIiwiY29uc29sZSIsImxvZyIsInNsaWNlIiwiaXRlbVF0eSIsIm1pbiIsImRlbEltZyIsImJ1eUxpbmUiLCJidXlCdG4iLCJzZXRCdG5WYWx1ZSIsImNyZWF0ZSIsInRvdGFsVmFsdWUiLCJ0b0ZpeGVkIiwiZWxlbWVudHMiLCJjdXJyZW50RWxlbWVudCIsImN1cnJlbnRFbGVtZW50TmFtZSIsImN1cnJlbnRTdG9yYWdlRWxlbWVudCIsInBhcnNlSW50IiwiY3VycmVudEVsZW1lbnRJbmRleCJdLCJtYXBwaW5ncyI6IkFBQUFBLFNBQVNDLGlCQUFpQixvQkFBb0IsV0FDM0IsSUFBSUMsT0FBTyxJQUNuQkMsa0JBQ1AsTUFBTUMsRUFBU0osU0FBU0ssZUFBZSxVQUtqQ0MsRUFKVSxJQUFJQyxRQUFRLENBQUMsQ0FDekJDLFdBQVksQ0FBQyxDQUFDQyxLQUFRLFVBQ2xCLENBQUNDLE1BQVMsVUFBVyxDQUFDQyxXQUFZLENBQUMsYUFDeEMsUUFBUyxLQUNXQyx1QkFDdkJSLEVBQU9TLE9BQU9QLEdBQ0csSUFBSVEsZ0JBQWdCLElBQzVCQyxhQUFhQyxTQUFRQyxJQUMxQmpCLFNBQVNLLGVBQWVZLEdBQVNoQixpQkFBaUIsU0FBUyxXQUN2REQsU0FBU0ssZUFBZSxnQkFBZ0JhLElBQU0sYUFBYUQsUUFDM0RqQixTQUFTbUIsY0FBYyxpQkFBaUJDLFVBQVVDLE9BQU8sVUFDL0MsSUFBSVAsZ0JBQWdCRyxHQUM1Qkssd0JBQXdCTCxFQUM5QixHQUFFLEdBRVYsSUFFQWpCLFNBQVNDLGlCQUFpQixTQUFV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QUtDLFNBQVN4RyxLQUFLcEMsT0FBT2YsT0FDaEQwSixFQUFzQixHQUFLQSxFQUFzQixHQUFLdkcsS0FBS3BDLE9BQU9mLE1BQ2xFLE1BQU00SixFQUFzQnpHLEtBQUs2RSxXQUFXaEcsUUFBUTBILEdBQ3BEdkcsS0FBSzZFLFdBQVc0QixHQUF1QkYsRUFDdkMvSCxhQUFhTSxRQUFRLGFBQWNSLEtBQUtTLFVBQVVpQixLQUFLNkUsYUFDdkQ3RSxLQUFLZ0csYUFBWSxFQUNyQiIsImZpbGUiOiJidWlsZC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IG9yZGVycyA9IG5ldyBQcmljZXMoJycpO1xuICAgIG9yZGVycy5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICBjb25zdCBwYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFza2V0Jyk7XG4gICAgY29uc3QgZWxlbWVudCA9IG5ldyBFbGVtZW50KFt7XG4gICAgICAgIGF0dHJpYnV0ZXM6IFt7J3R5cGUnOiAnYnV0dG9uJ30sXG4gICAgICAgICAgICB7J3ZhbHVlJzogJ09yZGVycyd9LCB7Y2xhc3NOYW1lczogWydiYXNrZXQnXX1dXG4gICAgfSwgJ2lucHV0JywgJyddKTtcbiAgICBjb25zdCBiYXNrZXQgPSBlbGVtZW50LnNldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgcGFyZW50LmFwcGVuZChiYXNrZXQpO1xuICAgIGNvbnN0IGxpc3RlbmVyID0gbmV3IEluZ3JlZGllbnRzRGF0YSgnJyk7XG4gICAgbGlzdGVuZXIubWVudUVsZW1lbnRzLmZvckVhY2goZWxlbWVudCA9PiB7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVsZW1lbnQpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3RJbWFnZScpLnNyYyA9IGAuLi9pbWFnZXMvJHtlbGVtZW50fS5qcGdgO1xuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3RJbWFnZScpLmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpO1xuICAgICAgICAgICAgY29uc3QgYSA9IG5ldyBJbmdyZWRpZW50c0RhdGEoZWxlbWVudCk7XG4gICAgICAgICAgICBhLnVwZGF0ZUxpc3RPZkluZ3JlZGllbnRzKGVsZW1lbnQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0MSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jb25maXJtLW9yZGVyJyk7XG4gICAgY29uc3QgdGFyZ2V0MiA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5iYXNrZXQnKTtcbiAgICBjb25zdCB0YXJnZXQzID0gZS50YXJnZXQuY2xvc2VzdCgnLmRlbFByb2R1Y3QnKTtcbiAgICBjb25zdCB0YXJnZXQ0ID0gZS50YXJnZXQuY2xvc2VzdCgnLnRvdGFsLXByaWNlLWJ0bicpO1xuICAgIGlmICh0YXJnZXQxKSB7XG4gICAgICAgIGNvbnN0IG9yZGVycyA9IG5ldyBQcmljZXModGFyZ2V0MSk7XG4gICAgICAgIG9yZGVycy51c2VyT3JkZXJzU3RvcmFnZSgpO1xuICAgIH1cbiAgICBpZiAodGFyZ2V0Mikge1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdEltYWdlJykuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIxJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgIGNvbnN0IG9yZGVycyA9IG5ldyBQcmljZXModGFyZ2V0Mik7XG4gICAgICAgIG9yZGVycy5kaXNwbGF5T3JkZXJzKCk7XG4gICAgfVxuICAgIGlmICh0YXJnZXQzKSB7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSB0YXJnZXQzLmdldEF0dHJpYnV0ZSgnZGF0YS1kZWxQcm9kdWN0Jyk7XG4gICAgICAgIGNvbnN0IHN0b3JhZ2UgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdVc2VyT3JkZXJzJykpO1xuICAgICAgICBjb25zdCBwcm9kdWN0ID0gc3RvcmFnZS5maW5kKGUgPT4gZVswXSA9PT0gZWxlbWVudCk7XG4gICAgICAgIHN0b3JhZ2Uuc3BsaWNlKHN0b3JhZ2UuaW5kZXhPZihwcm9kdWN0KSwgMSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdVc2VyT3JkZXJzJywgSlNPTi5zdHJpbmdpZnkoc3RvcmFnZSkpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsaVtkYXRhLWxpbmU9XCIke2VsZW1lbnR9XCJdYCkucmVtb3ZlKCk7XG4gICAgICAgIGlmIChzdG9yYWdlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG90YWwtcHJpY2UtYnRuJykucmVtb3ZlKCk7XG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFza2V0SW5mbycpLmlubmVyVGV4dCA9ICdUaGVyZSBpcyBubyBvcmRlcnMgeWV0ISc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRhcmdldDQpIHtcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IG5ldyBNZXNzYWdlKHRhcmdldDQudmFsdWUpO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG90YWwtcHJpY2UtYnRuJykucmVtb3ZlKCk7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNrZXRJbmZvJykuaW5uZXJIVE1MID0gbWVzc2FnZS5nZXRNZXNzYWdlKCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0J1cmdlckNhbG9yaWVzJyk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnVXNlck9yZGVycycpO1xuICAgICAgICB9LCA3MDAwKTtcbiAgICB9XG59KTtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldC5jbG9zZXN0KCcuaXRlbVF0eScpO1xuICAgIGNvbnN0IHF0eVBhdHRlcm4gPSAvXlsxLTldL1xuICAgIGlmICghdGFyZ2V0LnZhbHVlLm1hdGNoKHF0eVBhdHRlcm4pKSB7XG4gICAgICAgIHRhcmdldC52YWx1ZSA9ICcxJ1xuICAgICAgICBhbGVydCgnTWluaW11bSBxdWFudGl0eSBpcyAxIScpXG4gICAgfVxuICAgIGNvbnN0IG9yZGVycyA9IG5ldyBQcmljZXModGFyZ2V0KTtcbiAgICBvcmRlcnMudXBkYXRlT3JkZXJQcmljZSgpO1xufSk7XG5cbiIsImNsYXNzIEVsZW1lbnQge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtbXX1hcmdzXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoYXJncykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSBhcmdzWzBdLmF0dHJpYnV0ZXM7XG4gICAgICAgIHRoaXMudGFnTmFtZSA9IGFyZ3NbMV07XG4gICAgfVxuXG4gICAgc2V0TXVsdGlwbGVBdHRyaWJ1dGUoKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy50YWdOYW1lKTtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVzLmZvckVhY2goYXR0cmlidXRlID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBhdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAnY2xhc3NOYW1lcycpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgY2xhc3NuYW1lIG9mIGF0dHJpYnV0ZVtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LmFkZChjbGFzc25hbWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZShrZXksIGF0dHJpYnV0ZVtrZXldKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfTtcbn1cbiIsImNsYXNzIE1lc3NhZ2Uge1xuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGl0ZW1cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihpdGVtKSB7XG4gICAgICAgIHRoaXMuaXRlbSA9IGl0ZW07XG4gICAgICAgIHRoaXMubWVzc2FnZSA9ICcnO1xuICAgICAgICB0aGlzLmNvZmZlZU1lc3NhZ2UgPSAnVGhlIGNsYXNzaWMgQ29sb21iaWFuIGNvZmZlZSBwZXJzb25pZmllcyB0aGUgdHlwaWNhbCB0YXN0ZSBvZiBTb3V0aCBBbWVyaWNhbiBjb2ZmZWVzLiAnICtcbiAgICAgICAgICAgICdUaHVzLCBpdCBoYXMgYSBtZWxsb3cgY2l0cnVzIGFjaWRpdHkgY29tYmluZWQgd2l0aCBhIHN0cm9uZyBjYXJhbWVsIHN3ZWV0bmVzcy4gSXQgaXMgY29uc2lkZXJlZCBhICcgK1xuICAgICAgICAgICAgJ21lZGl1bS1ib2RpZWQgY29mZmVlIHdpdGggaGludHMgb2YgbnV0dHkgdW5kZXJ0b25lcywgZnJ1aXR5IGZsYXZvcnMsIGFuZCBub3RlcyBvZiBjaG9jb2xhdGUnO1xuICAgICAgICB0aGlzLmRlc3NlcnRNZXNzYWdlID0gJ0l0XFwncyBhIHJpY2gsIG1vaXN0IGludGVuc2VseSBjaG9jb2xhdGUgZmxhdm91cmVkIGNha2UuIEl0XFwncyBkZW5zZW5lc3MgYW5kIGRpc3RpbmN0ICcgK1xuICAgICAgICAgICAgJ2Nob2NvbGF0ZSBmbGF2b3VyIGNhbiBtYWtlIGl0IHNlZW0gbW9yZSBsaWtlIGEgZGVzc2VydCB0aGFuIGEgY2FrZS4gTWFueSBkZXNjcmliZSB0aGlzIHRyZWF0IGFzIGEgcHVyZSAnICtcbiAgICAgICAgICAgICdjaG9jb2xhdGUgc2Vuc2F0aW9uLiBDZXJ0YWlubHkgdGhlIGRlbnNlIHN0cnVjdHVyZSBkb2VzIGNvbmNlbnRyYXRlIHRoZSBjaG9jb2xhdGUgZmxhdm91ci4nO1xuICAgICAgICB0aGlzLmJ1cmdlck1lc3NhZ2UgPSAnSnVpY3ksIGJpZywgbG9hZGVkIHdpdGggdG9wcGluZ3Mgb2YgbXkgY2hvaWNlLiBIaWdoIHF1YWxpdHkgYmVlZiBtZWRpdW0gdG8gd2VsbCB3aXRoICcgK1xuICAgICAgICAgICAgJ2NoZWVzZSBvbiBhIG11bHRpZ3JhaW4gYnVuLiBBIGh1Z2Ugc2luZ2xlIGJ1cmdlciB3aXRoIGFsbCB0aGUgZml4aW5ncyBhcyBwZXIgYmVsb3cgbGlzdCEnICtcbiAgICAgICAgICAgICdXYW50IHlvdXIgY2hvaWNlIHRvIG1ha2UgLSBnbyBhaGVhZCBhbmQgYWRqdXN0IHlvdXIgYnVyZ2VyIGhvdyB5b3UgbGlrZSBpdCEnO1xuICAgICAgICB0aGlzLmNvbGFNZXNzYWdlID0gJ0Vuam95IHdvcmxkIHdpZGUgbG92ZWQgc29mdCBkcmluaywgQ29jYSBDb2xhISBTZXJ2ZWQgd2l0aCBwaWVjZSBvZiBsaW1lIGluIGdsYXNzIGZ1bGwgJyArXG4gICAgICAgICAgICAnb2YgaWNlIHRvIG1ha2UgeW91ciB0aGlyc3QgdG8gZ28gYXdheSEnO1xuICAgICAgICB0aGlzLmZyaWVzTWVzc2FnZSA9ICdJZGVhbGx5IHlvdXIgZnJpZXMgc2hvdWxkIGhhdmUgYSBjcnVuY2h5IGV4dGVyaW9yIGFuZCBhIGxpZ2h0LCBmbHVmZnkgaW50ZXJpb3IuICcgK1xuICAgICAgICAgICAgJ1doZW4gZWF0aW5nIGEgc2VydmluZyBvZiBGcmVuY2ggZnJpZXMsIHRoZSBsYXN0IGZyeSBzaG91bGQgYWx3YXlzIGhvbGQgaXRzIGZvcm0uICcgK1xuICAgICAgICAgICAgJ0ltYWdpbmUgZWF0aW5nIGEgYnVyZ2VyIHdpdGggYSBzaWRlIG9mIGZyaWVzLiBGcmllcyBhcmUgZWl0aGVyIGVhdGVuIGZpcnN0IG9yIGxhc3QtIHNvIGJlIHN1cmUgdG8gJyArXG4gICAgICAgICAgICAnbGVhdmUgYSBsYXN0aW5nIGltcHJlc3Npb24uJztcbiAgICAgICAgdGhpcy5idXJnZXJTZXRNZXNzYWdlID0gJ0dyZWF0IGRlYWwgZm9yIHlvdSEgT3JkZXIgZnVsbCBzZXQgYW5kIGdldCAxMCBwZXJjZW50IGRpc2NvdW50LiBUYXN0eSBidXJnZXIgd2l0aCAnICtcbiAgICAgICAgICAgICdjcnVuY2h5IGZyaWVzIGFuZCBncmVhdCB0YXN0ZSBvZiBjb29sZWQgQ29jYSBDb2xhIHdpbGwgYmUgYSBob2xpZGF5IGZvciB5b3VyIHN0b21hY2ghJztcbiAgICAgICAgdGhpcy5jb25maXJtYXRpb25PcmRlck1lc3NhZ2UgPSAnVGhhbmsgeW91IGZvciBvcmRlcmluZyB3aXRoIG91ciByZXN0YXVyYW50ISBQbGVhc2UgcGF5IGF0IHRoZScgK1xuICAgICAgICAgICAgJyBkZXNrIGFuZCBjb2xsZWN0IG9yZGVyIGFzIHBlciB5b3VyIG51bWJlciEgICAgJztcbiAgICB9XG5cbiAgICBnZXRNZXNzYWdlKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuaXRlbSkge1xuICAgICAgICAgICAgY2FzZSAnQ29mZmVlJyA6XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5jb2ZmZWVNZXNzYWdlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VcbiAgICAgICAgICAgIGNhc2UgJ0Nob2NvbGF0ZSBDYWtlJyA6XG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5kZXNzZXJ0TWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlXG4gICAgICAgICAgICBjYXNlICdGcmVuY2ggRnJpZXMnIDpcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmZyaWVzTWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlXG4gICAgICAgICAgICBjYXNlICdCdXJnZXIgQ2xhc3NpYycgOlxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuYnVyZ2VyTWVzc2FnZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlXG4gICAgICAgICAgICBjYXNlICdDb2NhIENvbGEnIDpcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmNvbGFNZXNzYWdlO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2VcbiAgICAgICAgICAgIGNhc2UgJ0J1cmdlciBTZXQnIDpcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmJ1cmdlclNldE1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVzc2FnZVxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmNvbmZpcm1hdGlvbk9yZGVyTWVzc2FnZSArICc8cD4gWW91ciBudW1iZXIgaXMgIyAnICtcbiAgICAgICAgICAgICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArICc8L3A+JyArICc8cD5Ub3RhbCBhbW91bnQgdG8gcGF5IDogJyArXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbS5zcGxpdCgnICcpWzJdICsgJyBVU0Q8L3A+JztcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5tZXNzYWdlXG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgKHRoaXMuaXRlbSA9PT0gJ0NvZmZlZScpIHtcbiAgICAgICAgLy8gICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuY29mZmVlTWVzc2FnZVxuICAgICAgICAvLyB9IGVsc2UgaWYgKHRoaXMuaXRlbSA9PT0gJ0Nob2NvbGF0ZSBDYWtlJykge1xuICAgICAgICAvLyAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5kZXNzZXJ0TWVzc2FnZVxuICAgICAgICAvLyB9IGVsc2UgaWYgKHRoaXMuaXRlbSA9PT0gJ0ZyZW5jaCBGcmllcycpIHtcbiAgICAgICAgLy8gICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuZnJpZXNNZXNzYWdlXG4gICAgICAgIC8vIH0gZWxzZSBpZiAodGhpcy5pdGVtID09PSAnQnVyZ2VyIENsYXNzaWMnKSB7XG4gICAgICAgIC8vICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmJ1cmdlck1lc3NhZ2VcbiAgICAgICAgLy8gfSBlbHNlIGlmICh0aGlzLml0ZW0gPT09ICdDb2NhIENvbGEnKSB7XG4gICAgICAgIC8vICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLmNvbGFNZXNzYWdlXG4gICAgICAgIC8vIH0gZWxzZSBpZiAodGhpcy5pdGVtID09PSAnQnVyZ2VyIFNldCcpIHtcbiAgICAgICAgLy8gICAgIHRoaXMubWVzc2FnZSA9IHRoaXMuYnVyZ2VyU2V0TWVzc2FnZVxuICAgICAgICAvLyB9IGVsc2Uge1xuICAgICAgICAvLyAgICAgdGhpcy5tZXNzYWdlID0gdGhpcy5jb25maXJtYXRpb25PcmRlck1lc3NhZ2UgKyAnPHA+IFlvdXIgbnVtYmVyIGlzICMgJyArXG4gICAgICAgIC8vICAgICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwKSArICc8L3A+JyArICc8cD5Ub3RhbCBhbW91bnQgdG8gcGF5IDogJyArXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5pdGVtLnNwbGl0KCcgJylbMl0gKyAnIFVTRDwvcD4nO1xuICAgICAgICAvLyB9XG4gICAgICAgIC8vIHJldHVybiB0aGlzLm1lc3NhZ2U7XG4gICAgfTtcbn0iLCJjbGFzcyBCdXJnZXIge1xuICAgICNiYXNlX2luZ3JlZGllbnRzID0gWydCdW4nLCAnTWVhdCddXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYmFzZV9pbmdyZWRpZW50cyA9IHRoaXMuI2Jhc2VfaW5ncmVkaWVudHNcbiAgICAgICAgdGhpcy5PbmlvbkNhbG9yaWVzID0gNztcbiAgICAgICAgdGhpcy5TYWxhZENhbG9yaWVzID0gMTc7XG4gICAgICAgIHRoaXMuQ2hlZXNlQ2Fsb3JpZXMgPSA1ODtcbiAgICAgICAgdGhpcy5DYWJiYWdlQ2Fsb3JpZXMgPSAyMjtcbiAgICAgICAgdGhpcy5Ub21hdG9DYWxvcmllcyA9IDg7XG4gICAgICAgIHRoaXMuTWVhdENhbG9yaWVzID0gMjUwO1xuICAgICAgICB0aGlzLkJ1bkNhbG9yaWVzID0gMTUwO1xuICAgICAgICB0aGlzLk11c3RhcmRDYWxvcmllcyA9IDEwO1xuICAgICAgICB0aGlzLlNhdWNlQmFyYmVxdWVDYWxvcmllcyA9IDM0O1xuICAgICAgICB0aGlzLk1heW9DYWxvcmllcyA9IDk0O1xuICAgICAgICB0aGlzLktldGNodXBDYWxvcmllcyA9IDE3O1xuICAgICAgICB0aGlzLmluZ3JlZGllbnRzQnVyZ2VyID0gW1xuICAgICAgICAgICAgeydpbmdyZWRpZW50JzogJ09uaW9uJywgJ3N0YXR1cyc6IHRydWUsICdjYWwnOiB0aGlzLk9uaW9uQ2Fsb3JpZXMsfSxcbiAgICAgICAgICAgIHsnaW5ncmVkaWVudCc6ICdTYWxhZCcsICdzdGF0dXMnOiB0cnVlLCAnY2FsJzp0aGlzLlNhbGFkQ2Fsb3JpZXMsfSxcbiAgICAgICAgICAgIHsnaW5ncmVkaWVudCc6ICdDaGVlc2UnLCAnc3RhdHVzJzogdHJ1ZSwgJ2NhbCc6IHRoaXMuQ2hlZXNlQ2Fsb3JpZXMsfSxcbiAgICAgICAgICAgIHsnaW5ncmVkaWVudCc6ICdDYWJiYWdlJywgJ3N0YXR1cyc6IHRydWUsICdjYWwnOnRoaXMuQ2FiYmFnZUNhbG9yaWVzLH0sXG4gICAgICAgICAgICB7J2luZ3JlZGllbnQnOiAnVG9tYXRvJywgJ3N0YXR1cyc6IHRydWUsICdjYWwnOiB0aGlzLlRvbWF0b0NhbG9yaWVzfSxcbiAgICAgICAgICAgIHsnaW5ncmVkaWVudCc6ICdNYXlvJywgJ3N0YXR1cyc6IHRydWUsICdjYWwnOiB0aGlzLk1heW9DYWxvcmllcyx9LFxuICAgICAgICAgICAgeydpbmdyZWRpZW50JzogJ0tldGNodXAnLCAnc3RhdHVzJzogdHJ1ZSwgJ2NhbCc6IHRoaXMuS2V0Y2h1cENhbG9yaWVzLH0sXG4gICAgICAgICAgICB7J2luZ3JlZGllbnQnOiAnTXVzdGFyZCcsICdzdGF0dXMnOiB0cnVlLCAnY2FsJzogdGhpcy5NdXN0YXJkQ2Fsb3JpZXMsfSxcbiAgICAgICAgICAgIHsnaW5ncmVkaWVudCc6ICdTYXVjZUJhcmJlcXVlJywgJ3N0YXR1cyc6IHRydWUsICdjYWwnOiB0aGlzLlNhdWNlQmFyYmVxdWVDYWxvcmllcyx9XG4gICAgICAgIF07XG4gICAgfTtcbn1cblxuIiwiY2xhc3MgSW5ncmVkaWVudHNEYXRhIHtcbiAgICAjcHJvZHVjdENhbHMgPSBbXG4gICAgICAgIHsnRnJlbmNoIEZyaWVzJzogMzEyfSxcbiAgICAgICAgeydDb2NhIENvbGEnOiAxMzl9LFxuICAgICAgICB7J0J1cmdlciBTZXQnOiA5NjN9LFxuICAgICAgICB7J0J1cmdlciBDbGFzc2ljJzogNTEyfSxcbiAgICAgICAgeydDaG9jb2xhdGUgQ2FrZSc6IDM2MH0sXG4gICAgICAgIHsnQ29mZmVlJzogOTV9XG4gICAgXTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuYnVyZ2VyQ2xhc3MgPSBuZXcgQnVyZ2VyKClcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgdGhpcy5pbmdyZWRpZW50c0lkcyA9IFtdO1xuICAgICAgICB0aGlzLnBhcmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmdyZWRpZW50cycpO1xuICAgICAgICB0aGlzLm1lbnVFbGVtZW50cyA9IFsnQnVyZ2VyIENsYXNzaWMnLCAnRnJlbmNoIEZyaWVzJywgJ0NvZmZlZScsICdDb2NhIENvbGEnLCAnQ2hvY29sYXRlIENha2UnLCAnQnVyZ2VyIFNldCddO1xuICAgICAgICB0aGlzLmluZ3JlZGllbnRzID0gW107XG4gICAgICAgIHRoaXMudGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZHVjdC10aXRsZScpO1xuICAgICAgICB0aGlzLmNvbmZpcm1CdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29uZmlybS1vcmRlcicpO1xuICAgIH1cblxuICAgIHVwZGF0ZUxpc3RPZkluZ3JlZGllbnRzKCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYnVyZ2VyQ2xhc3MuaW5ncmVkaWVudHNCdXJnZXIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuaW5ncmVkaWVudHMucHVzaChPYmplY3QudmFsdWVzKHRoaXMuYnVyZ2VyQ2xhc3MuaW5ncmVkaWVudHNCdXJnZXJbaV0pWzBdKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNob3dMaXN0T2ZJbmdyZWRpZW50cygpO1xuICAgIH07XG5cbiAgICBzaG93TGlzdE9mSW5ncmVkaWVudHMoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdCdXJnZXJDYWxvcmllcycsIEpTT04uc3RyaW5naWZ5KHRoaXMuYnVyZ2VyQ2xhc3MuaW5ncmVkaWVudHNCdXJnZXIpKTtcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcjEnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgdGhpcy5wYXJlbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICAgICAgdGhpcy50aXRsZS5pbm5lclRleHQgPSB0aGlzLmVsZW1lbnQ7XG4gICAgICAgIGxldCB0b3RhbENhbHMgPSB0aGlzLkJ1bkNhbG9yaWVzICsgdGhpcy5NZWF0Q2Fsb3JpZXM7XG4gICAgICAgIHRoaXMuYnVyZ2VyQ2xhc3MuaW5ncmVkaWVudHNCdXJnZXIuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgIHRvdGFsQ2FscyArPSBpdGVtLmNhbDtcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5jb25maXJtTGluZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnQxID0gbmV3IEVsZW1lbnQoW3tcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J2RhdGEtaWQnOiB0aGlzLmVsZW1lbnR9LCB7Y2xhc3NOYW1lczogWydwcm9kdWN0LWRlc2NyaXB0aW9uJ119XVxuICAgICAgICB9LCAnbGknLCAnJ10pO1xuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uTGluZSA9IG5ld0VsZW1lbnQxLnNldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgIT09ICdCdXJnZXIgQ2xhc3NpYycpIHtcbiAgICAgICAgICAgIHRoaXMuI3Byb2R1Y3RDYWxzLmZvckVhY2gocHJvZHVjdERhdGEgPT4ge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBwcm9kdWN0RGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSB0aGlzLmVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvdGFsQ2FscyA9IHByb2R1Y3REYXRhW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5ld0VsZW1lbnQyID0gbmV3IEVsZW1lbnQoW3tcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J2RhdGEtaWQnOiB0aGlzLmVsZW1lbnR9LCB7J3R5cGUnOiAnYnV0dG9uJ30sXG4gICAgICAgICAgICAgICAgeyd2YWx1ZSc6ICdDb25maXJtIE9yZGVyIC0gVG90YWwgY2Fsb3JpZXM6ICcgKyB0b3RhbENhbHN9LCB7Y2xhc3NOYW1lczogWydjb25maXJtLW9yZGVyJ119XVxuICAgICAgICB9LCAnaW5wdXQnLCAnJ10pO1xuICAgICAgICB0aGlzLmNvbmZpcm1CdG4gPSBuZXdFbGVtZW50Mi5zZXRNdWx0aXBsZUF0dHJpYnV0ZSgpO1xuICAgICAgICB0aGlzLm1lc3NhZ2VJbml0ID0gbmV3IE1lc3NhZ2UodGhpcy5lbGVtZW50KTtcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbkxpbmUuaW5uZXJUZXh0ID0gdGhpcy5tZXNzYWdlSW5pdC5nZXRNZXNzYWdlKCk7XG4gICAgICAgIHRoaXMucGFyZW50LmFwcGVuZCh0aGlzLmRlc2NyaXB0aW9uTGluZSk7XG4gICAgICAgIGlmICh0aGlzLmVsZW1lbnQgPT09ICdCdXJnZXIgQ2xhc3NpYycpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXRpdGxlJykuaW5uZXJUZXh0ID0gJ0J1cmdlciBDbGFzc2ljJztcbiAgICAgICAgICAgIHRoaXMuaW5ncmVkaWVudHMuZm9yRWFjaChpbmdyZWRpZW50ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNoaWxkTWFpbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gNDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRTdWIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkTWFpbi5hcHBlbmQodGhpcy5jaGlsZFN1Yik7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRTdWIuaW5uZXJUZXh0ID0gaW5ncmVkaWVudDtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBuZXcgRWxlbWVudChbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J3R5cGUnOiAnYnV0dG9uJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsndmFsdWUnOiAnQWRkIC0nfSwge2NsYXNzTmFtZXM6IFsncGx1cy0nICsgaW5ncmVkaWVudCwgJ2FkZCddfV1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICdpbnB1dCcsICcnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdXNCdG4gPSBuZXdFbGVtZW50LnNldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkU3ViLmFwcGVuZCh0aGlzLnBsdXNCdG4pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBuZXcgRWxlbWVudChbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J3R5cGUnOiAnYnV0dG9uJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsndmFsdWUnOiAnUmVtb3ZlIC0nfSwge2NsYXNzTmFtZXM6IFsnbWludXMtJyArIGluZ3JlZGllbnQsICdyZW1vdmUnXX1dXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAnaW5wdXQnLCAnJ10pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5taW51c0J0biA9IG5ld0VsZW1lbnQuc2V0TXVsdGlwbGVBdHRyaWJ1dGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRTdWIuYXBwZW5kKHRoaXMubWludXNCdG4pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lID0gdGhpcy5idXJnZXJDbGFzcy5pbmdyZWRpZW50c0J1cmdlci5maW5kKGxpc3RJbmdyZWRpZW50ID0+IGxpc3RJbmdyZWRpZW50LmluZ3JlZGllbnQgPT09IGluZ3JlZGllbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2hpbGRTdWIuY2xhc3NMaXN0LmFkZCgnc3RhdHVzX2ltZycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBuZXcgRWxlbWVudChbe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVzOiBbeydhbHQnOiAnJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J3NyYyc6ICcuL2ltYWdlcy9vay5wbmcnfSwge2NsYXNzTmFtZXM6IFsnc3RhdHVzLWltZycsIGluZ3JlZGllbnRdfV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAnaW1nJywgJ3N0YXR1c19pbWcnXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWcgPSBuZXdFbGVtZW50LnNldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZFN1Yi5hcHBlbmQodGhpcy5pbWcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGlsZFN1Yi5pbm5lclRleHQgPSAodGhpcy5idXJnZXJDbGFzcy5pbmdyZWRpZW50c0J1cmdlci5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC5pbmdyZWRpZW50ID09PSBpbmdyZWRpZW50KSkuY2FsICsgJ0NhbCc7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkU3ViLmNsYXNzTGlzdC5hZGQoJ2NhbCcgKyBpbmdyZWRpZW50KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmQodGhpcy5jaGlsZE1haW4pO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbmZpcm1MaW5lLmFwcGVuZCh0aGlzLmNvbmZpcm1CdG4pO1xuICAgICAgICB0aGlzLnBhcmVudC5hcHBlbmQodGhpcy5jb25maXJtTGluZSk7XG4gICAgICAgIHRoaXMuY3VzdG9tSW5ncmVkaWVudExpc3RlbmVyKCk7XG4gICAgfVxuXG4gICAgY3VzdG9tSW5ncmVkaWVudExpc3RlbmVyKCkge1xuICAgICAgICB0aGlzLmluZ3JlZGllbnRzLmZvckVhY2goaW5ncmVkaWVudCA9PiB7XG4gICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRzSWRzLnB1c2goJ3BsdXMtJyArIGluZ3JlZGllbnQpO1xuICAgICAgICAgICAgdGhpcy5pbmdyZWRpZW50c0lkcy5wdXNoKCdtaW51cy0nICsgaW5ncmVkaWVudCk7XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuaW5ncmVkaWVudHNJZHMuZm9yRWFjaChpbmdyZWRpZW50SWQgPT4ge1xuICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gZS50YXJnZXQuY2xvc2VzdChgLiR7aW5ncmVkaWVudElkfWApO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmluZ3JlZGllbnRJZCA9IGluZ3JlZGllbnRJZDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbmdyZWRpZW50cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgdXBkYXRlSW5ncmVkaWVudHMoKSB7XG4gICAgICAgIGlmICh0aGlzLmluZ3JlZGllbnRJZCkge1xuICAgICAgICAgICAgY29uc3QgYWRkUmVtb3ZlSW5ncmVkaWVudElkID0gdGhpcy5pbmdyZWRpZW50SWQuc3BsaXQoJy0nKVswXTtcbiAgICAgICAgICAgIGNvbnN0IGluZ3JlZGllbnROYW1lID0gdGhpcy5pbmdyZWRpZW50SWQuc3BsaXQoJy0nKVsxXTtcbiAgICAgICAgICAgIHRoaXMubmV3VXBkYXRlZExpc3QgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdCdXJnZXJDYWxvcmllcycpKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJbmdyZWRpZW50ID0gdGhpcy5uZXdVcGRhdGVkTGlzdC5maW5kKGVsZW1lbnQgPT4gZWxlbWVudC5pbmdyZWRpZW50ID09PSBpbmdyZWRpZW50TmFtZSk7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnRJbmRleCA9IHRoaXMubmV3VXBkYXRlZExpc3QuaW5kZXhPZih0aGlzLnNlbGVjdGVkSW5ncmVkaWVudCk7XG4gICAgICAgICAgICBjb25zdCBjYWxfY3VycmVudCA9IFxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4keydjYWwnICsgdGhpcy5zZWxlY3RlZEluZ3JlZGllbnQuaW5ncmVkaWVudH1gKTtcbiAgICAgICAgICAgIGlmIChhZGRSZW1vdmVJbmdyZWRpZW50SWQgPT09ICdwbHVzJykge1xuICAgICAgICAgICAgICAgIHRoaXMubmV3VXBkYXRlZExpc3RbdGhpcy5lbGVtZW50SW5kZXhdLnN0YXR1cyA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdVcGRhdGVkTGlzdFt0aGlzLmVsZW1lbnRJbmRleF0uY2FsID1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5idXJnZXJDbGFzcy5pbmdyZWRpZW50c0J1cmdlci5maW5kKHByb2R1Y3QgPT4gcHJvZHVjdC5pbmdyZWRpZW50ID09PSBpbmdyZWRpZW50TmFtZSkuY2FsO1xuICAgICAgICAgICAgICAgIGNhbF9jdXJyZW50LmlubmVyVGV4dCA9IHRoaXMuYnVyZ2VyQ2xhc3MuaW5ncmVkaWVudHNCdXJnZXJbdGhpcy5lbGVtZW50SW5kZXhdLmNhbCArICcgQ2FsJztcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoYWRkUmVtb3ZlSW5ncmVkaWVudElkID09PSAnbWludXMnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdVcGRhdGVkTGlzdFt0aGlzLmVsZW1lbnRJbmRleF0uc3RhdHVzID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXdVcGRhdGVkTGlzdFt0aGlzLmVsZW1lbnRJbmRleF0uY2FsID0gMDtcbiAgICAgICAgICAgICAgICBjYWxfY3VycmVudC5pbm5lclRleHQgPSAnMCBDYWwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvdGFsQ2FscyA9IHRoaXMuQnVuQ2Fsb3JpZXMgKyB0aGlzLk1lYXRDYWxvcmllcztcbiAgICAgICAgICAgIHRoaXMubmV3VXBkYXRlZExpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICB0b3RhbENhbHMgKz0gaXRlbS5jYWw7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy5jb25maXJtQnRuLnZhbHVlID0gJ0NvbmZpcm0gT3JkZXIgLSBUb3RhbCBjYWxvcmllczogJyArIHRvdGFsQ2FscztcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdHVzSW1nKCk7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnQnVyZ2VyQ2Fsb3JpZXMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLm5ld1VwZGF0ZWRMaXN0KSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTdGF0dXNJbWcoKSB7XG4gICAgICAgIGNvbnN0IGltZ19jdXJyZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGhpcy5zZWxlY3RlZEluZ3JlZGllbnQuaW5ncmVkaWVudH1gKTtcbiAgICAgICAgdGhpcy5uZXdVcGRhdGVkTGlzdFt0aGlzLmVsZW1lbnRJbmRleF0uc3RhdHVzID09PSB0cnVlID8gaW1nX2N1cnJlbnQuc3JjID0gJy4vaW1hZ2VzL29rLnBuZycgOiBcbiAgICAgICAgICAgIGltZ19jdXJyZW50LnNyYyA9ICcuL2ltYWdlcy9vZmYucG5nJztcbiAgICB9XG59IiwiY2xhc3MgUHJpY2VzIHtcbiAgICAjcHJpY2VzID0gW1xuICAgICAgICB7J0J1cmdlciBDbGFzc2ljJzogNi44N30sXG4gICAgICAgIHsnQ29jYSBDb2xhJzogMS4zMn0sXG4gICAgICAgIHsnQ29mZmVlJzogMS44N30sXG4gICAgICAgIHsnQ2hvY29sYXRlIENha2UnOiAzLjM2fSxcbiAgICAgICAgeydCdXJnZXIgU2V0JzogOS42NX0sXG4gICAgICAgIHsnRnJlbmNoIEZyaWVzJzogMi41NH0sXG4gICAgXTtcblxuICAgIC8qKlxuICAgICAqXG4gICAgICogQHBhcmFtIHthbnl9IHRhcmdldFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRhcmdldCkge1xuICAgICAgICB0aGlzLmRhdGEgPSBuZXcgQnVyZ2VyKClcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIHRoaXMudXNlck9yZGVycyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ1VzZXJPcmRlcnMnKSk7XG4gICAgICAgIHRoaXMuZGlzcGxheUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFza2V0SW5mbycpO1xuICAgIH07XG5cbiAgICBzZXRMb2NhbFN0b3JhZ2UoKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdVc2VyT3JkZXJzJykgfHwgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VzZXJPcmRlcnMnLCAnW10nKTtcbiAgICB9O1xuXG4gICAgdXNlck9yZGVyc1N0b3JhZ2UoKSB7XG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICAgICAgaWYgKHRoaXMudXNlck9yZGVycykge1xuICAgICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMudXNlck9yZGVycy5maW5kKGl0ZW0gPT4gaXRlbVswXSA9PT0gZGF0YSk7XG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdHkgPSAxO1xuICAgICAgICAgICAgICAgIGNvbnN0IHByaWNlID0gdGhpcy5wcmljZUNvbHVtbkRhdGEoJycsIFtkYXRhLCBxdHldLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgdGhpcy51c2VyT3JkZXJzLnB1c2goW2RhdGEsIHF0eSwgcHJpY2UsIHF0eSAqIHByaWNlXSk7XG4gICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ1VzZXJPcmRlcnMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnVzZXJPcmRlcnMpKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbmFsaXplT3JkZXIoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1RoaXMgaXRlbSBpcyBhbHJlYWR5IGluIHlvdXIgYmFza2V0IScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZpbmFsaXplT3JkZXIoKSB7XG4gICAgICAgIGlmIChjb25maXJtKCdJdGVtIGhhcyBiZWVuIGFkZGVkIHRvIGJhc2tldC4gV291bGQgeW91IGxpa2UgdG8gZmluYWxpemUgb3JkZXI/JykpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0SW1hZ2UnKS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWluZXIxJykuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlPcmRlcnMoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBkaXNwbGF5T3JkZXJzKCkge1xuICAgICAgICB0aGlzLmRpc3BsYXlFbGVtZW50LmlubmVySFRNTCA9ICcnO1xuICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHRoaXMudXNlck9yZGVycykge1xuICAgICAgICAgICAgY29uc3Qgb3JkZXJMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIG9yZGVyTGluZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtbGluZScsIGl0ZW1bMF0pO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gMzsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcmRlckxpbmVDb2x1bW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGlmIChpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1bMF0gPT09ICdCdXJnZXIgQ2xhc3NpYycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBpbmdyZWRpZW50TGlzdCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5ncmVkaWVudHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdCdXJnZXJDYWxvcmllcycpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudHMuZm9yRWFjaChpbmdyZWRpZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaW5ncmVkaWVudC5zdGF0dXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5ncmVkaWVudExpc3QgKz0gaW5ncmVkaWVudC5pbmdyZWRpZW50ICsgJywgJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBsYWluQnVyZ2VyO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZ3JlZGllbnRMaXN0Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coaW5ncmVkaWVudExpc3QubGVuZ3RoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluQnVyZ2VyID0gJzpwbGFpbic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWluQnVyZ2VyID0gJywgJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJMaW5lQ29sdW1uLmlubmVySFRNTCA9IGAke2l0ZW1bMF19IDogPHA+KCAke3RoaXMuZGF0YS5iYXNlX2luZ3JlZGllbnRzWzBdICsgXCIsIFwiICsgdGhpcy5kYXRhLmJhc2VfaW5ncmVkaWVudHNbMV0gKyBwbGFpbkJ1cmdlciArIGluZ3JlZGllbnRMaXN0LnNsaWNlKDAsIC0yKX0gKTwvcD5gXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVyTGluZUNvbHVtbi5pbm5lclRleHQgPSBpdGVtWzBdO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdmFsdWUgPSAxO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJPcmRlcnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50WzBdID09PSBpdGVtWzBdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlbGVtZW50WzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IEVsZW1lbnQoW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J3R5cGUnOiAnbnVtYmVyJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeyd2YWx1ZSc6IHZhbHVlfSwgeydtaW4nOiAnMSd9LCB7J2RhdGEtbmFtZSc6IGl0ZW1bMF19LCB7Y2xhc3NOYW1lczogWydpdGVtUXR5J119XVxuICAgICAgICAgICAgICAgICAgICB9LCAnaW5wdXQnLCAnJ10pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBpdGVtUXR5ID0gbmV3RWxlbWVudC5zZXRNdWx0aXBsZUF0dHJpYnV0ZSgpO1xuXG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmRlckxpbmVDb2x1bW4uYXBwZW5kKGl0ZW1RdHkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaSA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJpY2VDb2x1bW5EYXRhKHRoaXMub3JkZXJMaW5lQ29sdW1uLCBpdGVtLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgPT0gMykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdFbGVtZW50ID0gbmV3IEVsZW1lbnQoW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J2FsdCc6ICcnfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7J2RhdGEtZGVsUHJvZHVjdCc6IGl0ZW1bMF19LCB7J3NyYyc6ICcuL2ltYWdlcy9kZWxldGUucG5nJ30sIHtjbGFzc05hbWVzOiBbJ2RlbFByb2R1Y3QnXX1dXG4gICAgICAgICAgICAgICAgICAgIH0sICdpbWcnLCAnJ10pO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWxJbWcgPSBuZXdFbGVtZW50LnNldE11bHRpcGxlQXR0cmlidXRlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXJMaW5lQ29sdW1uLmFwcGVuZChkZWxJbWcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvcmRlckxpbmUuYXBwZW5kKHRoaXMub3JkZXJMaW5lQ29sdW1uKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlFbGVtZW50LmFwcGVuZChvcmRlckxpbmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy51c2VyT3JkZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICBjb25zdCBidXlMaW5lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBuZXcgRWxlbWVudChbe1xuICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7J3R5cGUnOiAnYnV0dG9uJ30sIHtjbGFzc05hbWVzOiBbJ3RvdGFsLXByaWNlLWJ0biddfV1cbiAgICAgICAgICAgIH0sICdpbnB1dCcsICcnXSk7XG4gICAgICAgICAgICB0aGlzLmJ1eUJ0biA9IG5ld0VsZW1lbnQuc2V0TXVsdGlwbGVBdHRyaWJ1dGUoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QnRuVmFsdWUodHJ1ZSk7XG4gICAgICAgICAgICBidXlMaW5lLmFwcGVuZCh0aGlzLmJ1eUJ0bik7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlFbGVtZW50LmFwcGVuZChidXlMaW5lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXNrZXRJbmZvJykuaW5uZXJUZXh0ID0gJ1RoZXJlIGlzIG5vIG9yZGVycyB5ZXQhJztcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzZXRCdG5WYWx1ZShjcmVhdGUpIHtcbiAgICAgICAgaWYgKCFjcmVhdGUpIHtcbiAgICAgICAgICAgIHRoaXMuYnV5QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvdGFsLXByaWNlLWJ0bicpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB0b3RhbFZhbHVlID0gMFxuICAgICAgICB0aGlzLnVzZXJPcmRlcnMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIHRvdGFsVmFsdWUgKz0gZWxlbWVudFszXVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5idXlCdG4udmFsdWUgPSAnQ29uZmlybSBPcmRlcnMgJyArIHRvdGFsVmFsdWUudG9GaXhlZCgyKSArICcgVVNEJztcbiAgICB9O1xuXG4gICAgcHJpY2VDb2x1bW5EYXRhKGVsZW1lbnRzLCBpdGVtLCBzdGF0dXMpIHtcbiAgICAgICAgbGV0IHByaWNlO1xuICAgICAgICB0aGlzLiNwcmljZXMuZm9yRWFjaChlbGVtZW50ID0+IHtcbiAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiBlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gaXRlbVswXSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5pbm5lclRleHQgPSAoaXRlbVsxXSAqIGVsZW1lbnRba2V5XSkudG9GaXhlZCgyKSArICcgVVNEJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnaXRlbVByaWNlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5zZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScsIGl0ZW1bMF0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgKHByaWNlID0gZWxlbWVudFtrZXldKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBwcmljZTtcbiAgICB9O1xuXG4gICAgdXBkYXRlT3JkZXJQcmljZSgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudEVsZW1lbnQgPVxuICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLml0ZW1QcmljZVtkYXRhLW5hbWU9XCIke3RoaXMudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyl9XCJdYCk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50TmFtZSA9IGN1cnJlbnRFbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1uYW1lJyk7XG4gICAgICAgIHRoaXMucHJpY2VDb2x1bW5EYXRhKGN1cnJlbnRFbGVtZW50LCBbY3VycmVudEVsZW1lbnROYW1lLCB0aGlzLnRhcmdldC52YWx1ZV0sIHRydWUpO1xuICAgICAgICBjb25zdCBjdXJyZW50U3RvcmFnZUVsZW1lbnQgPSB0aGlzLnVzZXJPcmRlcnMuZmluZChpdGVtID0+IGl0ZW1bMF0gPT09IGN1cnJlbnRFbGVtZW50TmFtZSk7XG4gICAgICAgIGN1cnJlbnRTdG9yYWdlRWxlbWVudFsxXSA9IHBhcnNlSW50KHRoaXMudGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgY3VycmVudFN0b3JhZ2VFbGVtZW50WzNdID0gY3VycmVudFN0b3JhZ2VFbGVtZW50WzJdICogdGhpcy50YXJnZXQudmFsdWU7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRFbGVtZW50SW5kZXggPSB0aGlzLnVzZXJPcmRlcnMuaW5kZXhPZihjdXJyZW50U3RvcmFnZUVsZW1lbnQpO1xuICAgICAgICB0aGlzLnVzZXJPcmRlcnNbY3VycmVudEVsZW1lbnRJbmRleF0gPSBjdXJyZW50U3RvcmFnZUVsZW1lbnQ7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdVc2VyT3JkZXJzJywgSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyT3JkZXJzKSk7XG4gICAgICAgIHRoaXMuc2V0QnRuVmFsdWUoZmFsc2UpO1xuICAgIH07XG59XG5cblxuIl19
